<?xml version="1.0" encoding="UTF-8"?>
<ISUI>
  <template name='My.window.TitleBar'>
    <Border>1</Border>
    <x>3</x>
    <BorderColor>FF000033</BorderColor>
    <Width>r6</Width>
    <Height>26</Height>
    <Texture Template='EQ2.window.TitleBar.Texture' />
    <Children>
      <Text Name='Title' template='EQ2.window.TitleBar.title' />
      <Button Name='Minimize' template='EQ2.window.TitleBar.Minimize'>
      </Button>
      <Button Name='Maximize' template='EQ2.window.TitleBar.Maximize'>
      </Button>
      <commandbutton name='Custom Close Button' Template='EQ2.Window.TitleBar.Close'>
        <Command>Script[${If[${Script[Buffer:Craft](exists)},Buffer:Craft,Craft]}]:End</Command>
      </commandbutton>
    </Children>
  </template>
  <template name='My.window'>
    <Border>1</Border>
    <Resizable>1</Resizable>
    <CloseButton />
    <MinimizeButton />
    <MaximizeButton />
    <TitleBar template='My.window.TitleBar' />
    <OffsetTitleBarHeight />
    <Client template='EQ2.window.Client' />
    <StorePosition>1</StorePosition>
  </template>

  <!-- Main LGUI -->
  <Window Name='CraftTest' template='My.window'>
    <X>100</X>
    <Y>100</Y>
    <Width>400</Width>
    <Height>90</Height>
    <StorePosition>1</StorePosition>
    <Client Template='EQ2.Window.Client'>
      <Y>20</Y>
    </Client>
    <Title>Craft Path Tester</Title>
    <TitleBar Template='EQ2.Window.TitleBar'>
      <X>0</X>
      <Y>0</Y>
      <Width>100%</Width>
      <Height>20</Height>
      <Children>
        <Text Name='Title' Template='EQ2.Window.TitleBar.Title' />
        <Button Name='Minimize' Template='EQ2.Window.TitleBar.Minimize'>
          <X>r35</X>
          <Width>14</Width>
          <Height>14</Height>
        </Button>
        <Button name='Custom Close Button' Template='EQ2.Window.TitleBar.Close'>
          <X>r17</X>
          <Width>14</Width>
          <Height>14</Height>
          <OnLeftClick>
            Script[CraftPathTester]:End
            timedcommand 0 "ui -unload scripts/EQ2Craft/UI/CraftPath.xml"
          </OnLeftClick>
        </Button>
      </Children>
    </TitleBar>
    <Children>
      <Text Name='Status' Template='EQ2.Text'>
        <X>5%</X>
        <Y>3</Y>
        <Width>90%</Width>
        <Height>20</Height>
        <Text>${Script[CraftPathTester].Variable[CurrentStatus]}</Text>
      </Text>
      <Textentry Name='MoveTo' Template='EQ2.Textentry'>
        <X>20</X>
        <Y>25</Y>
        <Width>r40</Width>
        <Height>20</Height>
        <Text></Text>
      </Textentry>
      <Button Name='MoveToButton' Template='EQ2.Button'>
        <X>105</X>
        <Y>50</Y>
        <Width>90</Width>
        <Height>20</Height>
        <Text>Move To Device</Text>
        <OnLeftClick>
          if ${UIElement[MoveTo@CraftTest].Text.NotEqual[""]}
          {
          Script[CraftPathTester]:QueueCommand[call QueuedMoveTo ${UIElement[MoveTo@CraftTest].Text}]
          }
        </OnLeftClick>
      </Button>
      <Button Name='RunFull' Template='EQ2.Button'>
        <X>20</X>
        <Y>50</Y>
        <Width>80</Width>
        <Height>20</Height>
        <Text>Test Full Path</Text>
        <OnLeftClick>
          Script[CraftPathTester]:QueueCommand[call CheckAll]
        </OnLeftClick>
      </Button>
    </Children>
  </Window>
</ISUI>